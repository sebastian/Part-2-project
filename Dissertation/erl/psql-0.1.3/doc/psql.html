<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Module psql</title>
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="EDoc">
</head>
<body bgcolor="white">
<div class="navbar"><a name="#navbar_top"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<hr>

<h1>Module psql</h1>
<ul class="index"><li><a href="#description">Description</a></li><li><a href="#types">Data Types</a></li><li><a href="#index">Function Index</a></li><li><a href="#functions">Function Details</a></li></ul>Interface module for the PostgreSQL driver.
<p>Copyright © 2006 Erlang Training &amp; Consulting Ltd</p>

<p><b>Version:</b> 0.2.0</p>
<p><b>Behaviours:</b> <a href="application.html"><tt>application</tt></a>.</p>
<p><b>Authors:</b> Martin Carlson (<a href="mailto:martin@erlang-consulting.com"><tt>martin@erlang-consulting.com</tt></a>).</p>

<h2><a name="description">Description</a></h2>Interface module for the PostgreSQL driver
<h2><a name="types">Data Types</a></h2>

<h3 class="typedecl"><a name="type-query">'query'()</a></h3>
<p><tt>'query'() = string()</tt></p>
<p>SQL conformant query with omitted semicolon
 </p>

<h3 class="typedecl"><a name="type-portal">portal()</a></h3>
<p><tt>portal() = string() | []</tt></p>
<p>A string representation of a postgre portal, see postgres documentation
 </p>

<h3 class="typedecl"><a name="type-result">result()</a></h3>
<p><tt>result() = [] | [{Command::binary(), Data::<a href="#type-rows">rows()</a>}] | {sql_error, term()} | term()</tt></p>
<p>Query results, rows are represented as tuples and
  values are converted to the closest erlang type
 </p>

<h3 class="typedecl"><a name="type-row">row()</a></h3>
<p><tt>row() = tuple() | binary()</tt></p>
<p>A tuple with one element per column converted to erlang terms
  if the sql_query is used or if a description is passed to execute
  else a binary representation for each column
 </p>

<h3 class="typedecl"><a name="type-rows">rows()</a></h3>
<p><tt>rows() = [<a href="#type-row">row()</a>] | []</tt></p>


<h3 class="typedecl"><a name="type-sql_type">sql_type()</a></h3>
<p><tt>sql_type() = integer()</tt></p>
<p>A integer representing the OID of the type, see postgres documentation</p>

<h3 class="typedecl"><a name="type-statement">statement()</a></h3>
<p><tt>statement() = string() | []</tt></p>
<p>A string representation of a postgre statement, see postgres documentation
 </p>

<h2><a name="index">Function Index</a></h2>
<table width="100%" border="1" cellspacing="0" cellpadding="2" summary="function index"><tr><td valign="top"><a href="#allocate-0">allocate/0</a></td><td>Allocate a connection from the pool.</td></tr>
<tr><td valign="top"><a href="#bind-4">bind/4</a></td><td>Bind variables to placeholders.</td></tr>
<tr><td valign="top"><a href="#close-3">close/3</a></td><td>Closes a statement or portal.</td></tr>
<tr><td valign="top"><a href="#commit-1">commit/1</a></td><td>Commits a transaction.</td></tr>
<tr><td valign="top"><a href="#connect-4">connect/4</a></td><td>Connect to database.</td></tr>
<tr><td valign="top"><a href="#connect-6">connect/6</a></td><td>Connect to database.</td></tr>
<tr><td valign="top"><a href="#describe-3">describe/3</a></td><td>Describes a resultset from a statement or a portal.</td></tr>
<tr><td valign="top"><a href="#execute-3">execute/3</a></td><td>Execute a portal returns at most Size rows.</td></tr>
<tr><td valign="top"><a href="#execute-4">execute/4</a></td><td>Execute a portal returns at most Size rows converted to erlang terms.</td></tr>
<tr><td valign="top"><a href="#free-0">free/0</a></td><td>Free a connection back to the pool.</td></tr>
<tr><td valign="top"><a href="#parse-4">parse/4</a></td><td>Parse a sql query, can contain placeholders, i.e $N.</td></tr>
<tr><td valign="top"><a href="#rollback-1">rollback/1</a></td><td>Roll back a transaction.</td></tr>
<tr><td valign="top"><a href="#sql_query-2">sql_query/2</a></td><td>Simple sql query.</td></tr>
<tr><td valign="top"><a href="#start-2">start/2</a></td><td></td></tr>
<tr><td valign="top"><a href="#stop-1">stop/1</a></td><td></td></tr>
<tr><td valign="top"><a href="#transaction-1">transaction/1</a></td><td>Starts a transaction.</td></tr>
</table>

<h2><a name="functions">Function Details</a></h2>

<h3 class="function"><a name="allocate-0">allocate/0</a></h3>
<div class="spec">
<p><tt>allocate() -&gt; pid()</tt></p>
</div><p>Allocate a connection from the pool</p>

<h3 class="function"><a name="bind-4">bind/4</a></h3>
<div class="spec">
<p><tt>bind(Pid::pid(), Portal::<a href="#type-portal">portal()</a>, Statement::<a href="#type-statement">statement()</a>, Args::[string()]) -&gt; {[], []}</tt></p>
</div><p>Bind variables to placeholders. Variables must be strings</p>

<h3 class="function"><a name="close-3">close/3</a></h3>
<div class="spec">
<p><tt>close(Pid, Type::statement | portal, Name::<a href="#type-portal">portal()</a> | <a href="#type-statement">statement()</a>) -&gt; <a href="#type-result">result()</a></tt></p>
</div><p>Closes a statement or portal</p>

<h3 class="function"><a name="commit-1">commit/1</a></h3>
<div class="spec">
<p><tt>commit(Pid::pid()) -&gt; <a href="#type-result">result()</a></tt></p>
</div><p>Commits a transaction</p>

<h3 class="function"><a name="connect-4">connect/4</a></h3>
<div class="spec">
<p><tt>connect(Pid::pid(), Host::string(), Usr::string(), Pwd::string()) -&gt; ok</tt></p>
</div><p>Connect to database</p>

<h3 class="function"><a name="connect-6">connect/6</a></h3>
<div class="spec">
<p><tt>connect(Pid::pid(), Host::string(), Port::integer(), Usr::string(), Pwd::string(), DB::string) -&gt; ok</tt></p>
</div><p>Connect to database</p>

<h3 class="function"><a name="describe-3">describe/3</a></h3>
<div class="spec">
<p><tt>describe(Pid, Type::statement | portal, Name::<a href="#type-statement">statement()</a> | <a href="#type-portal">portal()</a>) -&gt; <a href="#type-result">result()</a></tt></p>
</div><p>Describes a resultset from a statement or a portal.</p>

<h3 class="function"><a name="execute-3">execute/3</a></h3>
<div class="spec">
<p><tt>execute(Pid::pid(), Portal::<a href="#type-portal">portal()</a>, Size::integer()) -&gt; <a href="#type-result">result()</a></tt></p>
</div><p>Execute a portal returns at most Size rows</p>

<h3 class="function"><a name="execute-4">execute/4</a></h3>
<div class="spec">
<p><tt>execute(Pid::pid(), Portal::<a href="#type-portal">portal()</a>, Size::integer(), Description::term()) -&gt; <a href="#type-result">result()</a></tt></p>
</div><p>Execute a portal returns at most Size rows converted to erlang terms.</p>

<h3 class="function"><a name="free-0">free/0</a></h3>
<div class="spec">
<p><tt>free() -&gt; ok</tt></p>
</div><p>Free a connection back to the pool</p>

<h3 class="function"><a name="parse-4">parse/4</a></h3>
<div class="spec">
<p><tt>parse(Pid::pid(), Name::<a href="#type-statement">statement()</a>, Query::<a href="#type-query">'query'()</a>, Args::[<a href="#type-sql_type">sql_type()</a>]) -&gt; {[], []}</tt></p>
</div><p>Parse a sql query, can contain placeholders, i.e $N</p>

<h3 class="function"><a name="rollback-1">rollback/1</a></h3>
<div class="spec">
<p><tt>rollback(Pid::pid()) -&gt; <a href="#type-result">result()</a></tt></p>
</div><p>Roll back a transaction</p>

<h3 class="function"><a name="sql_query-2">sql_query/2</a></h3>
<div class="spec">
<p><tt>sql_query(Pid::pid(), Query::<a href="#type-query">'query'()</a>) -&gt; <a href="#type-result">result()</a></tt></p>
</div><p>Simple sql query</p>

<h3 class="function"><a name="start-2">start/2</a></h3>
<div class="spec">
<p><tt>start(X1, X2) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="stop-1">stop/1</a></h3>
<div class="spec">
<p><tt>stop(State) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="transaction-1">transaction/1</a></h3>
<div class="spec">
<p><tt>transaction(Pid::pid()) -&gt; <a href="#type-result">result()</a></tt></p>
</div><p>Starts a transaction</p>
<hr>

<div class="navbar"><a name="#navbar_bottom"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<p><i>Generated by EDoc, Mar 24 2011, 10:14:00.</i></p>
</body>
</html>

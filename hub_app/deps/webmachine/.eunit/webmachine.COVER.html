<html>
<head><title>.eunit/webmachine.COVER.html</title></head><body bgcolor=white text=black>
<pre>
File generated from /Users/seb/Documents/part2project/app/deps/webmachine/.eunit/webmachine.erl by COVER 2010-10-28 at 14:19:54

****************************************************************************

        |  %% @author Justin Sheehy &lt;justin@basho.com&gt;
        |  %% @author Andy Gross &lt;andy@basho.com&gt;
        |  %% @copyright 2007-2009 Basho Technologies
        |  %%
        |  %%    Licensed under the Apache License, Version 2.0 (the "License");
        |  %%    you may not use this file except in compliance with the License.
        |  %%    You may obtain a copy of the License at
        |  %%
        |  %%        http://www.apache.org/licenses/LICENSE-2.0
        |  %%
        |  %%    Unless required by applicable law or agreed to in writing, software
        |  %%    distributed under the License is distributed on an "AS IS" BASIS,
        |  %%    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
        |  %%    See the License for the specific language governing permissions and
        |  %%    limitations under the License.
        |  
        |  -module(webmachine).
        |  -author('Justin Sheehy &lt;justin@basho.com&gt;').
        |  -author('Andy Gross &lt;andy@basho.com&gt;').
        |  -export([start/0, stop/0]).
        |  -export([new_request/2]).
        |  
        |  -include("webmachine_logger.hrl").
        |  -include_lib("include/wm_reqstate.hrl").
        |  -include_lib("include/wm_reqdata.hrl").
        |  
        |  %% @spec start() -&gt; ok
        |  %% @doc Start the webmachine server.
        |  start() -&gt;
<font color=red>     0..|      webmachine_deps:ensure(),</font>
<font color=red>     0..|      application:start(crypto),</font>
<font color=red>     0..|      application:start(webmachine).</font>
        |  
        |  %% @spec stop() -&gt; ok
        |  %% @doc Stop the webmachine server.
        |  stop() -&gt;
<font color=red>     0..|      application:stop(webmachine).</font>
        |  
        |  new_request(mochiweb, Request) -&gt;
<font color=red>     0..|      Socket = Request:get(socket),</font>
<font color=red>     0..|      Method = Request:get(method),</font>
<font color=red>     0..|      RawPath = Request:get(raw_path), </font>
<font color=red>     0..|      Version = Request:get(version),</font>
<font color=red>     0..|      Headers = Request:get(headers),</font>
<font color=red>     0..|      InitState = #wm_reqstate{socket=Socket,</font>
        |                            reqdata=wrq:create(Method,Version,RawPath,Headers)},
        |      
<font color=red>     0..|      InitReq = {webmachine_request,InitState},</font>
<font color=red>     0..|      {Peer, ReqState} = InitReq:get_peer(),</font>
<font color=red>     0..|      PeerState = ReqState#wm_reqstate{reqdata=wrq:set_peer(Peer,</font>
        |                                                ReqState#wm_reqstate.reqdata)},
<font color=red>     0..|      LogData = #wm_log_data{start_time=now(),</font>
        |                             method=Method,
        |                             headers=Headers,
        |                             peer=PeerState#wm_reqstate.peer,
        |                             path=RawPath,
        |                             version=Version,
        |                             response_code=404,
        |                             response_length=0},
<font color=red>     0..|      webmachine_request:new(PeerState#wm_reqstate{log_data=LogData}).</font>
        |  
        |  
        |  
        |  
        |    
</pre>
</body>
</html>

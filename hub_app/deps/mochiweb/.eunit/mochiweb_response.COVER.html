<html>
<head><title>.eunit/mochiweb_response.COVER.html</title></head><body bgcolor=white text=black>
<pre>
File generated from /Users/seb/Documents/part2project/app/deps/mochiweb/.eunit/mochiweb_response.erl by COVER 2010-10-28 at 14:19:50

****************************************************************************

        |  %% @author Bob Ippolito &lt;bob@mochimedia.com&gt;
        |  %% @copyright 2007 Mochi Media, Inc.
        |  
        |  %% @doc Response abstraction.
        |  
        |  -module(mochiweb_response, [Request, Code, Headers]).
        |  -author('bob@mochimedia.com').
        |  
        |  -define(QUIP, "Any of you quaids got a smint?").
        |  
        |  -export([get_header_value/1, get/1, dump/0]).
        |  -export([send/1, write_chunk/1]).
        |  
        |  %% @spec get_header_value(string() | atom() | binary()) -&gt; string() | undefined
        |  %% @doc Get the value of the given response header.
        |  get_header_value(K) -&gt;
<font color=red>     0..|      mochiweb_headers:get_value(K, Headers).</font>
        |  
        |  %% @spec get(request | code | headers) -&gt; term()
        |  %% @doc Return the internal representation of the given field.
        |  get(request) -&gt;
<font color=red>     0..|      Request;</font>
        |  get(code) -&gt;
<font color=red>     0..|      Code;</font>
        |  get(headers) -&gt;
<font color=red>     0..|      Headers.</font>
        |  
        |  %% @spec dump() -&gt; {mochiweb_request, [{atom(), term()}]}
        |  %% @doc Dump the internal representation to a "human readable" set of terms
        |  %%      for debugging/inspection purposes.
        |  dump() -&gt;
<font color=red>     0..|      [{request, Request:dump()},</font>
        |       {code, Code},
        |       {headers, mochiweb_headers:to_list(Headers)}].
        |  
        |  %% @spec send(iodata()) -&gt; ok
        |  %% @doc Send data over the socket if the method is not HEAD.
        |  send(Data) -&gt;
<font color=red>     0..|      case Request:get(method) of</font>
        |          'HEAD' -&gt;
<font color=red>     0..|              ok;</font>
        |          _ -&gt;
<font color=red>     0..|              Request:send(Data)</font>
        |      end.
        |  
        |  %% @spec write_chunk(iodata()) -&gt; ok
        |  %% @doc Write a chunk of a HTTP chunked response. If Data is zero length,
        |  %%      then the chunked response will be finished.
        |  write_chunk(Data) -&gt;
<font color=red>     0..|      case Request:get(version) of</font>
        |          Version when Version &gt;= {1, 1} -&gt;
<font color=red>     0..|              Length = iolist_size(Data),</font>
<font color=red>     0..|              send([io_lib:format("~.16b\r\n", [Length]), Data, &lt;&lt;"\r\n"&gt;&gt;]);</font>
        |          _ -&gt;
<font color=red>     0..|              send(Data)</font>
        |      end.
        |  
        |  
        |  %%
        |  %% Tests
        |  %%
        |  -include_lib("eunit/include/eunit.hrl").
        |  -ifdef(TEST).
        |  -endif.
</pre>
</body>
</html>

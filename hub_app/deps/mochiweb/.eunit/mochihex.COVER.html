<html>
<head><title>.eunit/mochihex.COVER.html</title></head><body bgcolor=white text=black>
<pre>
File generated from /Users/seb/Documents/part2project/app/deps/mochiweb/.eunit/mochihex.erl by COVER 2010-10-28 at 14:19:48

****************************************************************************

        |  %% @author Bob Ippolito &lt;bob@mochimedia.com&gt;
        |  %% @copyright 2006 Mochi Media, Inc.
        |  
        |  %% @doc Utilities for working with hexadecimal strings.
        |  
        |  -module(mochihex).
        |  -author('bob@mochimedia.com').
        |  
        |  -export([to_hex/1, to_bin/1, to_int/1, dehex/1, hexdigit/1]).
        |  
        |  %% @type iolist() = [char() | binary() | iolist()]
        |  %% @type iodata() = iolist() | binary()
        |  
        |  %% @spec to_hex(integer | iolist()) -&gt; string()
        |  %% @doc Convert an iolist to a hexadecimal string.
        |  to_hex(0) -&gt;
     1..|      "0";
        |  to_hex(I) when is_integer(I), I &gt; 0 -&gt;
     1..|      to_hex_int(I, []);
        |  to_hex(B) -&gt;
     2..|      to_hex(iolist_to_binary(B), []).
        |  
        |  %% @spec to_bin(string()) -&gt; binary()
        |  %% @doc Convert a hexadecimal string to a binary.
        |  to_bin(L) -&gt;
     2..|      to_bin(L, []).
        |  
        |  %% @spec to_int(string()) -&gt; integer()
        |  %% @doc Convert a hexadecimal string to an integer.
        |  to_int(L) -&gt;
     3..|      erlang:list_to_integer(L, 16).
        |  
        |  %% @spec dehex(char()) -&gt; integer()
        |  %% @doc Convert a hex digit to its integer value.
        |  dehex(C) when C &gt;= $0, C =&lt; $9 -&gt;
     8..|      C - $0;
        |  dehex(C) when C &gt;= $a, C =&lt; $f -&gt;
     6..|      C - $a + 10;
        |  dehex(C) when C &gt;= $A, C =&lt; $F -&gt;
     2..|      C - $A + 10.
        |  
        |  %% @spec hexdigit(integer()) -&gt; char()
        |  %% @doc Convert an integer less than 16 to a hex digit.
        |  hexdigit(C) when C &gt;= 0, C =&lt; 9 -&gt;
    20..|      C + $0;
        |  hexdigit(C) when C =&lt; 15 -&gt;
    12..|      C + $a - 10.
        |  
        |  %% Internal API
        |  
        |  to_hex(&lt;&lt;&gt;&gt;, Acc) -&gt;
     2..|      lists:reverse(Acc);
        |  to_hex(&lt;&lt;C1:4, C2:4, Rest/binary&gt;&gt;, Acc) -&gt;
    12..|      to_hex(Rest, [hexdigit(C2), hexdigit(C1) | Acc]).
        |  
        |  to_hex_int(0, Acc) -&gt;
     1..|      Acc;
        |  to_hex_int(I, Acc) -&gt;
     8..|      to_hex_int(I bsr 4, [hexdigit(I band 15) | Acc]).
        |  
        |  to_bin([], Acc) -&gt;
     2..|      iolist_to_binary(lists:reverse(Acc));
        |  to_bin([C1, C2 | Rest], Acc) -&gt;
     8..|      to_bin(Rest, [(dehex(C1) bsl 4) bor dehex(C2) | Acc]).
        |  
        |  
        |  
        |  %%
        |  %% Tests
        |  %%
        |  -include_lib("eunit/include/eunit.hrl").
        |  -ifdef(TEST).
        |  
        |  to_hex_test() -&gt;
     1..|      "ff000ff1" = to_hex([255, 0, 15, 241]),
     1..|      "ff000ff1" = to_hex(16#ff000ff1),
     1..|      "0" = to_hex(16#0),
     1..|      ok.
        |  
        |  to_bin_test() -&gt;
     1..|      &lt;&lt;255, 0, 15, 241&gt;&gt; = to_bin("ff000ff1"),
     1..|      &lt;&lt;255, 0, 10, 161&gt;&gt; = to_bin("Ff000aA1"),
     1..|      ok.
        |  
        |  to_int_test() -&gt;
     1..|      16#ff000ff1 = to_int("ff000ff1"),
     1..|      16#ff000aa1 = to_int("FF000Aa1"),
     1..|      16#0 = to_int("0"),
     1..|      ok.
        |  
        |  -endif.
</pre>
</body>
</html>

<html>
<head><title>.eunit/mochiweb_io.COVER.html</title></head><body bgcolor=white text=black>
<pre>
File generated from /Users/seb/Documents/part2project/app/deps/mochiweb/.eunit/mochiweb_io.erl by COVER 2010-10-28 at 14:19:50

****************************************************************************

        |  %% @author Bob Ippolito &lt;bob@mochimedia.com&gt;
        |  %% @copyright 2007 Mochi Media, Inc.
        |  
        |  %% @doc Utilities for dealing with IO devices (open files).
        |  
        |  -module(mochiweb_io).
        |  -author('bob@mochimedia.com').
        |  
        |  -export([iodevice_stream/3, iodevice_stream/2]).
        |  -export([iodevice_foldl/4, iodevice_foldl/3]).
        |  -export([iodevice_size/1]).
        |  -define(READ_SIZE, 8192).
        |  
        |  iodevice_foldl(F, Acc, IoDevice) -&gt;
<font color=red>     0..|      iodevice_foldl(F, Acc, IoDevice, ?READ_SIZE).</font>
        |  
        |  iodevice_foldl(F, Acc, IoDevice, BufferSize) -&gt;
<font color=red>     0..|      case file:read(IoDevice, BufferSize) of</font>
        |          eof -&gt;
<font color=red>     0..|              Acc;</font>
        |          {ok, Data} -&gt;
<font color=red>     0..|              iodevice_foldl(F, F(Data, Acc), IoDevice, BufferSize)</font>
        |      end.
        |  
        |  iodevice_stream(Callback, IoDevice) -&gt;
<font color=red>     0..|      iodevice_stream(Callback, IoDevice, ?READ_SIZE).</font>
        |  
        |  iodevice_stream(Callback, IoDevice, BufferSize) -&gt;
<font color=red>     0..|      F = fun (Data, ok) -&gt; Callback(Data) end,</font>
<font color=red>     0..|      ok = iodevice_foldl(F, ok, IoDevice, BufferSize).</font>
        |  
        |  iodevice_size(IoDevice) -&gt;
<font color=red>     0..|      {ok, Size} = file:position(IoDevice, eof),</font>
<font color=red>     0..|      {ok, 0} = file:position(IoDevice, bof),</font>
<font color=red>     0..|      Size.</font>
        |  
        |  
        |  %%
        |  %% Tests
        |  %%
        |  -include_lib("eunit/include/eunit.hrl").
        |  -ifdef(TEST).
        |  
        |  
        |  
        |  -endif.
</pre>
</body>
</html>
